[[inputs.mqtt_consumer]]
  servers = ["${MQTT_SERV}"]
  username = "${MQTT_USER}"
  password = "${MQTT_PASS}"
  connection_timeout = "30s"
  qos = 0
  persistent_session = false
  topics = [
    "$SYS/broker/bytes/+",
    "$SYS/broker/load/bytes/+/15min",
    "test/+/temperature"
  ]
  topic_tag = ""
  data_format = "value"
  data_type = "float"   # even if int

  [[inputs.mqtt_consumer.topic_parsing]]
    topic = "+/+/+/+"  # all topics with 4 segments
    tags = "_/_/domain/type"
    measurement = "_/measurement/_/_"

  [[inputs.mqtt_consumer.topic_parsing]]
    topic = "+/+/+/+/+/+"
    tags = "_/_/domain/_/type/_"
    measurement = "_/measurement/_/_/_/_"

  [[inputs.mqtt_consumer.topic_parsing]]
    topic = "+/+/+"
    tags = "_/device/_"
    measurement = "_/_/measurement"

[[processors.rename]]
  [processors.rename.tagpass]
    domain = ["bytes"]
  [[processors.rename.replace]]
    field = "value"
    dest = "total"
