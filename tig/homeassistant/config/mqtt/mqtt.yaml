sensor:
# These are autodetected, and just classes are customized
  - name: "Energy house total"
    unique_id: "sensor.mt681_total"
    state_topic: "tasmota/strom/tele/SENSOR"
    value_template: "{{ value_json['MT681'].Total_in }}"
    device_class: energy
    state_class: total_increasing
  # 'last_reset_topic' "fake/last_reset" deprecated AND 'last_reset_topic' must be same as 'state_topic'
#    last_reset_value_template: >
#      {{"1970-01-01T00:00:00+00:00"}}
#        {{as_datetime(0|timestamp_utc).isoformat()}}
    unit_of_measurement: "kWh"
  - name: "Energy house current"
    unique_id: "sensor.mt681_current"
    state_topic: "tasmota/strom/tele/SENSOR"
    value_template: "{{ value_json['MT681'].Power_curr }}"
    device_class: power
    state_class: measurement
    unit_of_measurement: 'W'
  - name: "StromBattery"
    unique_id: "sensor.mt681_battery_level"
    state_topic: "tasmota/strom/tele/STATE"
    unit_of_measurement: "%"
    # 3.1-3.4
    value_template: "{{ ((value_json.Vcc | float(-1) - 3.1) * 333) | round() }}"
    device_class: battery
#tasmota/strom/tele/STATE {"Time":"2022-01-21T00:03:13","Uptime":"0T00:00:09","UptimeSec":9,"Vcc":3.366,"Heap":24,"SleepMode":"Dynamic","Sleep":50,"LoadAvg":19,"MqttCount":1,"Wifi":{"AP":1,"SSId":"BaseLAN","BSSId":"2C:67:FB:57:17:AC","Channel":6,"Mode":"11n","RSSI":32,"Signal":-84,"LinkCount":1,"Downtime":"0T00:00:03"}}

  - name: "Bad ATC Batterie"
    unique_id: "sensor.atc_edc2_battery"
    state_topic: "tasmota_ble/tele/bad"
    value_template: "{{ value_json['ATCe4edc2'].Battery }}"
    unit_of_measurement: "%"
    device_class: battery
    availability:
    - topic: "tasmota/abseite/tele/LWT"
      payload_available: "Online"
      payload_not_available: "Offline"
# WARNING (MainThread) [homeassistant.helpers.template] Template variable warning: 'dict object' has no attribute 'Temperature' when rendering '{{ value_json.Temperature }}'
  - name: "Bad Temperatur"
    unique_id: "sensor.atc_edc2_temperature"
    state_topic: "tasmota_ble/tele/bad"
    value_template: "{{ value_json['ATCe4edc2'].Temperature }}"
    unit_of_measurement: "Â°C"
    device_class: temperature
    availability:
    - topic: "tasmota/abseite/tele/LWT"
      payload_available: "Online"
      payload_not_available: "Offline"
  - name: "Bad Luftfeuchtigkeit"
    unique_id: "sensor.atc_edc2_humidity"
    state_topic: "tasmota_ble/tele/bad"
    value_template: "{{ value_json['ATCe4edc2'].Humidity }}"
    unit_of_measurement: "%"
    device_class: humidity
    availability:
    - topic: "tasmota/abseite/tele/LWT"
      payload_available: "Online"
      payload_not_available: "Offline"
